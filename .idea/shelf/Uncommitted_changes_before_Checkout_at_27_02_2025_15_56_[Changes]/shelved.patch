Index: token/twitchToken.php
===================================================================
diff --git a/token/twitchToken.php b/token/twitchToken.php
deleted file mode 100644
--- a/token/twitchToken.php	(revision 35d0f9941c4a24c27366bfe24689eacf5309ee8e)
+++ /dev/null	(revision 35d0f9941c4a24c27366bfe24689eacf5309ee8e)
@@ -1,27 +0,0 @@
-<?php
-function gen_token(){
-    $url = "https://id.twitch.tv/oauth2/token";
-    $headers = [
-        "Content-Type: application/x-www-form-urlencoded"
-    ];
-
-    //Configurar opciones de cURL
-    $ch = curl_init();
-    curl_setopt($ch, CURLOPT_URL, $url);
-    curl_setopt($ch, CURLOPT_POST, true);
-    curl_setopt($ch, CURLOPT_POSTFIELDS, "client_id=3kvc11lm0hiyfqxs32i127986wbep6&client_secret=uk8rqpk69km2l83dj722t6wowsm7od&grant_type=client_credentials");
-    curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);
-    curl_setopt($ch, CURLOPT_HTTPHEADER, $headers);
-
-    //Ejecutar cURL
-    $response = curl_exec($ch);
-
-    //Obtener el c  digo de estado
-    $httpCode = curl_getinfo($ch, CURLINFO_HTTP_CODE);
-    curl_close($ch);
-
-    $data = json_decode($response, true);
-    return $data['access_token'];
-
-}
-?>
\ No newline at end of file
Index: .idea/workspace.xml
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+><?xml version=\"1.0\" encoding=\"UTF-8\"?>\r\n<project version=\"4\">\r\n  <component name=\"AutoImportSettings\">\r\n    <option name=\"autoReloadType\" value=\"SELECTIVE\" />\r\n  </component>\r\n  <component name=\"ChangeListManager\">\r\n    <list default=\"true\" id=\"abbaa022-7f15-418e-852f-0c26a25f80f3\" name=\"Changes\" comment=\"\">\r\n      <change beforePath=\"$PROJECT_DIR$/.idea/workspace.xml\" beforeDir=\"false\" afterPath=\"$PROJECT_DIR$/.idea/workspace.xml\" afterDir=\"false\" />\r\n      <change beforePath=\"$PROJECT_DIR$/endPoints/get/topsofthetops.php\" beforeDir=\"false\" afterPath=\"$PROJECT_DIR$/endPoints/get/topsofthetops.php\" afterDir=\"false\" />\r\n      <change beforePath=\"$PROJECT_DIR$/index.php\" beforeDir=\"false\" afterPath=\"$PROJECT_DIR$/index.php\" afterDir=\"false\" />\r\n    </list>\r\n    <option name=\"SHOW_DIALOG\" value=\"false\" />\r\n    <option name=\"HIGHLIGHT_CONFLICTS\" value=\"true\" />\r\n    <option name=\"HIGHLIGHT_NON_ACTIVE_CHANGELIST\" value=\"false\" />\r\n    <option name=\"LAST_RESOLUTION\" value=\"IGNORE\" />\r\n  </component>\r\n  <component name=\"ComposerSettings\">\r\n    <execution />\r\n  </component>\r\n  <component name=\"Git.Settings\">\r\n    <option name=\"RECENT_GIT_ROOT_PATH\" value=\"$PROJECT_DIR$\" />\r\n  </component>\r\n  <component name=\"GitHubPullRequestSearchHistory\">{\r\n  &quot;lastFilter&quot;: {\r\n    &quot;state&quot;: &quot;OPEN&quot;,\r\n    &quot;assignee&quot;: &quot;PatxiBueno&quot;\r\n  }\r\n}</component>\r\n  <component name=\"GithubPullRequestsUISettings\">{\r\n  &quot;selectedUrlAndAccountId&quot;: {\r\n    &quot;url&quot;: &quot;https://github.com/aritzhu/V-V.git&quot;,\r\n    &quot;accountId&quot;: &quot;2cbfc9a2-a159-4f55-a421-6cda507d17f7&quot;\r\n  }\r\n}</component>\r\n  <component name=\"ProjectColorInfo\">{\r\n  &quot;associatedIndex&quot;: 0\r\n}</component>\r\n  <component name=\"ProjectId\" id=\"2sasmKtEEW58vN4MOLds4ZycNOF\" />\r\n  <component name=\"ProjectViewState\">\r\n    <option name=\"hideEmptyMiddlePackages\" value=\"true\" />\r\n    <option name=\"showLibraryContents\" value=\"true\" />\r\n  </component>\r\n  <component name=\"PropertiesComponent\">{\r\n  &quot;keyToString&quot;: {\r\n    &quot;RunOnceActivity.ShowReadmeOnStart&quot;: &quot;true&quot;,\r\n    &quot;RunOnceActivity.git.unshallow&quot;: &quot;true&quot;,\r\n    &quot;WebServerToolWindowPanel.toolwindow.highlight.mappings&quot;: &quot;true&quot;,\r\n    &quot;WebServerToolWindowPanel.toolwindow.highlight.symlinks&quot;: &quot;true&quot;,\r\n    &quot;WebServerToolWindowPanel.toolwindow.show.date&quot;: &quot;false&quot;,\r\n    &quot;WebServerToolWindowPanel.toolwindow.show.permissions&quot;: &quot;false&quot;,\r\n    &quot;WebServerToolWindowPanel.toolwindow.show.size&quot;: &quot;false&quot;,\r\n    &quot;git-widget-placeholder&quot;: &quot;main&quot;,\r\n    &quot;node.js.detected.package.eslint&quot;: &quot;true&quot;,\r\n    &quot;node.js.detected.package.tslint&quot;: &quot;true&quot;,\r\n    &quot;node.js.selected.package.eslint&quot;: &quot;(autodetect)&quot;,\r\n    &quot;node.js.selected.package.tslint&quot;: &quot;(autodetect)&quot;,\r\n    &quot;nodejs_package_manager_path&quot;: &quot;npm&quot;,\r\n    &quot;settings.editor.selected.configurable&quot;: &quot;terminal&quot;,\r\n    &quot;vue.rearranger.settings.migration&quot;: &quot;true&quot;\r\n  }\r\n}</component>\r\n  <component name=\"RecentsManager\">\r\n    <key name=\"MoveFile.RECENT_KEYS\">\r\n      <recent name=\"C:\\Users\\Patxi\\PhpstormProjects\\V-V\\endPoints\\get\" />\r\n    </key>\r\n  </component>\r\n  <component name=\"SharedIndexes\">\r\n    <attachedChunks>\r\n      <set>\r\n        <option value=\"bundled-js-predefined-d6986cc7102b-76f8388c3a79-JavaScript-PS-243.24978.50\" />\r\n        <option value=\"bundled-php-predefined-a98d8de5180a-fbeb0b58ac0f-com.jetbrains.php.sharedIndexes-PS-243.24978.50\" />\r\n      </set>\r\n    </attachedChunks>\r\n  </component>\r\n  <component name=\"SpellCheckerSettings\" RuntimeDictionaries=\"0\" Folders=\"0\" CustomDictionaries=\"0\" DefaultDictionary=\"application-level\" UseSingleDictionary=\"true\" transferred=\"true\" />\r\n  <component name=\"TaskManager\">\r\n    <task active=\"true\" id=\"Default\" summary=\"Default task\">\r\n      <changelist id=\"abbaa022-7f15-418e-852f-0c26a25f80f3\" name=\"Changes\" comment=\"\" />\r\n      <created>1738705178011</created>\r\n      <option name=\"number\" value=\"Default\" />\r\n      <option name=\"presentableId\" value=\"Default\" />\r\n      <updated>1738705178011</updated>\r\n      <workItem from=\"1738705179632\" duration=\"1927000\" />\r\n      <workItem from=\"1738757469423\" duration=\"2640000\" />\r\n      <workItem from=\"1738782273855\" duration=\"4395000\" />\r\n      <workItem from=\"1738835323470\" duration=\"17377000\" />\r\n      <workItem from=\"1738940926092\" duration=\"2943000\" />\r\n      <workItem from=\"1739296251759\" duration=\"2089000\" />\r\n      <workItem from=\"1739806977619\" duration=\"807000\" />\r\n      <workItem from=\"1739808769495\" duration=\"6677000\" />\r\n      <workItem from=\"1739964898257\" duration=\"41000\" />\r\n      <workItem from=\"1739964952161\" duration=\"12363000\" />\r\n      <workItem from=\"1740052623638\" duration=\"1848000\" />\r\n    </task>\r\n    <servers />\r\n  </component>\r\n  <component name=\"TypeScriptGeneratedFilesManager\">\r\n    <option name=\"version\" value=\"3\" />\r\n  </component>\r\n  <component name=\"XSLT-Support.FileAssociations.UIState\">\r\n    <expand />\r\n    <select />\r\n  </component>\r\n</project>
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/.idea/workspace.xml b/.idea/workspace.xml
--- a/.idea/workspace.xml	(revision 35d0f9941c4a24c27366bfe24689eacf5309ee8e)
+++ b/.idea/workspace.xml	(date 1740668144132)
@@ -6,15 +6,16 @@
   <component name="ChangeListManager">
     <list default="true" id="abbaa022-7f15-418e-852f-0c26a25f80f3" name="Changes" comment="">
       <change beforePath="$PROJECT_DIR$/.idea/workspace.xml" beforeDir="false" afterPath="$PROJECT_DIR$/.idea/workspace.xml" afterDir="false" />
-      <change beforePath="$PROJECT_DIR$/endPoints/get/topsofthetops.php" beforeDir="false" afterPath="$PROJECT_DIR$/endPoints/get/topsofthetops.php" afterDir="false" />
-      <change beforePath="$PROJECT_DIR$/index.php" beforeDir="false" afterPath="$PROJECT_DIR$/index.php" afterDir="false" />
+      <change beforePath="$PROJECT_DIR$/Entrega2.docx" beforeDir="false" afterPath="$PROJECT_DIR$/Entrega2.docx" afterDir="false" />
+      <change beforePath="$PROJECT_DIR$/endPoints/get/enriched.php" beforeDir="false" afterPath="$PROJECT_DIR$/endPoints/get/enriched.php" afterDir="false" />
+      <change beforePath="$PROJECT_DIR$/token/twitchToken.php" beforeDir="false" />
     </list>
     <option name="SHOW_DIALOG" value="false" />
     <option name="HIGHLIGHT_CONFLICTS" value="true" />
     <option name="HIGHLIGHT_NON_ACTIVE_CHANGELIST" value="false" />
     <option name="LAST_RESOLUTION" value="IGNORE" />
   </component>
-  <component name="ComposerSettings">
+  <component name="ComposerSettings" synchronizationState="SYNCHRONIZE">
     <execution />
   </component>
   <component name="Git.Settings">
@@ -29,9 +30,11 @@
   <component name="GithubPullRequestsUISettings">{
   &quot;selectedUrlAndAccountId&quot;: {
     &quot;url&quot;: &quot;https://github.com/aritzhu/V-V.git&quot;,
-    &quot;accountId&quot;: &quot;2cbfc9a2-a159-4f55-a421-6cda507d17f7&quot;
+    &quot;accountId&quot;: &quot;b356d7ab-ac21-488b-971a-ebbfddc00400&quot;
   }
 }</component>
+  <component name="PhpDebugGeneral" listening_started="true" />
+  <component name="PhpWorkspaceProjectConfiguration" interpreter_name="C:\xampp\php\php.exe" />
   <component name="ProjectColorInfo">{
   &quot;associatedIndex&quot;: 0
 }</component>
@@ -50,12 +53,14 @@
     &quot;WebServerToolWindowPanel.toolwindow.show.permissions&quot;: &quot;false&quot;,
     &quot;WebServerToolWindowPanel.toolwindow.show.size&quot;: &quot;false&quot;,
     &quot;git-widget-placeholder&quot;: &quot;main&quot;,
+    &quot;last_opened_file_path&quot;: &quot;C:/Users/Joritz/Downloads/V-V&quot;,
     &quot;node.js.detected.package.eslint&quot;: &quot;true&quot;,
     &quot;node.js.detected.package.tslint&quot;: &quot;true&quot;,
     &quot;node.js.selected.package.eslint&quot;: &quot;(autodetect)&quot;,
     &quot;node.js.selected.package.tslint&quot;: &quot;(autodetect)&quot;,
     &quot;nodejs_package_manager_path&quot;: &quot;npm&quot;,
-    &quot;settings.editor.selected.configurable&quot;: &quot;terminal&quot;,
+    &quot;run.code.analysis.last.selected.profile&quot;: &quot;pProject Default&quot;,
+    &quot;settings.editor.selected.configurable&quot;: &quot;reference.webide.settings.project.settings.php&quot;,
     &quot;vue.rearranger.settings.migration&quot;: &quot;true&quot;
   }
 }</component>
@@ -91,6 +96,9 @@
       <workItem from="1739964898257" duration="41000" />
       <workItem from="1739964952161" duration="12363000" />
       <workItem from="1740052623638" duration="1848000" />
+      <workItem from="1740594214835" duration="75000" />
+      <workItem from="1740649134056" duration="3486000" />
+      <workItem from="1740668092453" duration="52000" />
     </task>
     <servers />
   </component>
Index: endPoints/get/enriched.php
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+><?php\r\nrequire_once('/var/www/html/twirch/twitchToken.php');\r\nheader(\"Content-type: application/json; charset=utf-8\");\r\n//Caso 3: GET /analytics/streams/enriched?limit=3\r\n\r\n//Coger el limite de streams\r\n\r\nfunction enriched($limit){\r\n    if( !isset($limit) || $limit < 1 || $limit > 100 ){\r\n        http_response_code(400);\r\n        $respuesta = [\"error \"=>\"Invalid limit parameter\"];\r\n        echo json_encode($respuesta);\r\n        exit;\r\n    }\r\n    //Paso 1: coger los streams\r\n    //Configurar llamada a la API\r\n    $urlStreams = \"https://api.twitch.tv/helix/streams?first=\" . $limit;\r\n    $headersStreams = [\r\n        \"Authorization: Bearer \" . gen_token() ,\r\n        \"Client-Id: 3kvc11lm0hiyfqxs32i127986wbep6\"\r\n    ];\r\n\r\n    //Configurar opciones de cURL\r\n    $chStreams = curl_init();\r\n    curl_setopt($chStreams, CURLOPT_URL, $urlStreams);\r\n    curl_setopt($chStreams, CURLOPT_RETURNTRANSFER, true);\r\n    curl_setopt($chStreams, CURLOPT_HTTPHEADER, $headersStreams);\r\n    curl_setopt($chStreams, CURLOPT_USERAGENT, \"Mozilla/5.0 (Windows NT 6.1; Win64; x64; rv:60.0) Gecko/20100101 Firefox/60.0\");\r\n    //Ejecutar cURL\r\n    $responseStreams = curl_exec($chStreams);\r\n\r\n    if($responseStreams == false){\r\n        print 'Error: ' . curl_error($chStreams);\r\n    }\r\n\r\n    //Obtener el código de estado\r\n    $httpCodeStreams = curl_getinfo($chStreams, CURLINFO_HTTP_CODE);\r\n\r\n    //Preparar array para crear el json\r\n    $infoStreamsEnriquecidos = [];\r\n\r\n    //Verificar el código de estado\r\n    if ($httpCodeStreams == 200) {\r\n        //Procesamos el JSON\r\n        $dataStreams = json_decode($responseStreams, true);\r\n\r\n        //Recorrer el array para guardar lo que nos interesa\r\n        foreach ($dataStreams[\"data\"] as $stream) {\r\n            //Limitamos el numero de streams\r\n            if($limit > 0){\r\n                //Paso 2: coger info de streamer para cada stream\r\n                $idStreamer = $stream[\"user_id\"];\r\n\r\n                //Configurar llamada a la API\r\n                $urlUser = \"https://api.twitch.tv/helix/users?id=\" . $idStreamer;\r\n                $headersUser = [\r\n                    \"Authorization: Bearer \" . gen_token() ,\r\n                    \"Client-Id: 3kvc11lm0hiyfqxs32i127986wbep6\"\r\n                ];\r\n\r\n                //Configurar opciones de cURL\r\n                $chUser = curl_init();\r\n                curl_setopt($chUser, CURLOPT_URL, $urlUser);\r\n                curl_setopt($chUser, CURLOPT_RETURNTRANSFER, true);\r\n                curl_setopt($chUser, CURLOPT_HTTPHEADER, $headersUser);\r\n\r\n                //Ejecutar cURL\r\n                $responseUser = curl_exec($chUser);\r\n\r\n                //Obtener el código de estado\r\n                $httpCodeUser = curl_getinfo($chUser, CURLINFO_HTTP_CODE);\r\n\r\n                // Verificar el código de estado\r\n                if ($httpCodeUser == 200) {\r\n                    //Procesamos el JSON\r\n                    $data = json_decode($responseUser, true);\r\n                    foreach ($data[\"data\"] as $streamer) {\r\n                        $user_name = $streamer[\"login\"];\r\n                        $display_name = $streamer[\"display_name\"];\r\n                        $profile_image_url = $streamer[\"profile_image_url\"];\r\n                    }\r\n\r\n                } else {\r\n                    echo \"⚠\uFE0F Código de error: $httpCodeUser\\n\";\r\n                }\r\n\r\n                $nuevoStreamEnriquecido = [\r\n                    \"stream_id\" => $stream[\"id\"],\r\n                    \"user_id\" => $idStreamer,\r\n                    \"user_name\" => $user_name,\r\n                    \"viewer_count\" => $stream[\"viewer_count\"],\r\n                    \"title\" => $stream[\"title\"],\r\n                    \"user_display_name\" => $display_name,\r\n                    \"profile_image_url\" => $profile_image_url\r\n                ];\r\n\r\n                // Cerrar la conexión cURL\r\n                curl_close($chUser);\r\n\r\n                //Añadir stream\r\n                $infoStreamsEnriquecidos[] = $nuevoStreamEnriquecido;\r\n                $limit--;\r\n            }\r\n        }\r\n\r\n        //Generamos JSON de envio\r\n        $jsonFinal = json_encode($infoStreamsEnriquecidos, JSON_PRETTY_PRINT | JSON_UNESCAPED_UNICODE);\r\n\r\n        echo $jsonFinal;\r\n\r\n    }elseif($httpCodeStreams == 401){\r\n        $respuesta = [\"error\" => \"Unauthorized. Twitch access token is invalid or has expired\"];\r\n        echo json_encode($respuesta);\r\n    }\r\n    elseif($httpCodeStreams == 500){\r\n        $respuesta = [\"error\" => \"Internal server error\"];\r\n        echo json_encode($respuesta);\r\n\r\n    }else {\r\n        echo \"⚠\uFE0F Código de error: $httpCodeStreams\\n\";\r\n    }\r\n    // Cerrar la conexión cURL\r\n    curl_close($chStreams);\r\n    }\r\n?>\r\n\r\n
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/endPoints/get/enriched.php b/endPoints/get/enriched.php
--- a/endPoints/get/enriched.php	(revision 35d0f9941c4a24c27366bfe24689eacf5309ee8e)
+++ b/endPoints/get/enriched.php	(date 1740652147300)
@@ -1,14 +1,16 @@
 <?php
+
 require_once('/var/www/html/twirch/twitchToken.php');
 header("Content-type: application/json; charset=utf-8");
 //Caso 3: GET /analytics/streams/enriched?limit=3
 
 //Coger el limite de streams
 
-function enriched($limit){
-    if( !isset($limit) || $limit < 1 || $limit > 100 ){
+function enriched($limit)
+{
+    if (!isset($limit) || $limit < 1 || $limit > 100) {
         http_response_code(400);
-        $respuesta = ["error "=>"Invalid limit parameter"];
+        $respuesta = ["error " => "Invalid limit parameter"];
         echo json_encode($respuesta);
         exit;
     }
@@ -16,7 +18,7 @@
     //Configurar llamada a la API
     $urlStreams = "https://api.twitch.tv/helix/streams?first=" . $limit;
     $headersStreams = [
-        "Authorization: Bearer " . gen_token() ,
+        "Authorization: Bearer " . gen_token(),
         "Client-Id: 3kvc11lm0hiyfqxs32i127986wbep6"
     ];
 
@@ -25,11 +27,15 @@
     curl_setopt($chStreams, CURLOPT_URL, $urlStreams);
     curl_setopt($chStreams, CURLOPT_RETURNTRANSFER, true);
     curl_setopt($chStreams, CURLOPT_HTTPHEADER, $headersStreams);
-    curl_setopt($chStreams, CURLOPT_USERAGENT, "Mozilla/5.0 (Windows NT 6.1; Win64; x64; rv:60.0) Gecko/20100101 Firefox/60.0");
+    curl_setopt(
+        $chStreams,
+        CURLOPT_USERAGENT,
+        "Mozilla/5.0 (Windows NT 6.1; Win64; x64; rv:60.0) Gecko/20100101 Firefox/60.0"
+    );
     //Ejecutar cURL
     $responseStreams = curl_exec($chStreams);
 
-    if($responseStreams == false){
+    if ($responseStreams == false) {
         print 'Error: ' . curl_error($chStreams);
     }
 
@@ -47,14 +53,14 @@
         //Recorrer el array para guardar lo que nos interesa
         foreach ($dataStreams["data"] as $stream) {
             //Limitamos el numero de streams
-            if($limit > 0){
+            if ($limit > 0) {
                 //Paso 2: coger info de streamer para cada stream
                 $idStreamer = $stream["user_id"];
 
                 //Configurar llamada a la API
                 $urlUser = "https://api.twitch.tv/helix/users?id=" . $idStreamer;
                 $headersUser = [
-                    "Authorization: Bearer " . gen_token() ,
+                    "Authorization: Bearer " . gen_token(),
                     "Client-Id: 3kvc11lm0hiyfqxs32i127986wbep6"
                 ];
 
@@ -79,7 +85,6 @@
                         $display_name = $streamer["display_name"];
                         $profile_image_url = $streamer["profile_image_url"];
                     }
-
                 } else {
                     echo "⚠️ Código de error: $httpCodeUser\n";
                 }
@@ -107,20 +112,18 @@
         $jsonFinal = json_encode($infoStreamsEnriquecidos, JSON_PRETTY_PRINT | JSON_UNESCAPED_UNICODE);
 
         echo $jsonFinal;
-
-    }elseif($httpCodeStreams == 401){
+    } elseif ($httpCodeStreams == 401) {
         $respuesta = ["error" => "Unauthorized. Twitch access token is invalid or has expired"];
         echo json_encode($respuesta);
-    }
-    elseif($httpCodeStreams == 500){
+    } elseif ($httpCodeStreams == 500) {
         $respuesta = ["error" => "Internal server error"];
         echo json_encode($respuesta);
-
-    }else {
+    } else {
         echo "⚠️ Código de error: $httpCodeStreams\n";
     }
     // Cerrar la conexión cURL
     curl_close($chStreams);
-    }
+}
+
 ?>
 
